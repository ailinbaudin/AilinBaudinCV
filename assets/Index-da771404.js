import{q,a as y,b as g,c as x,e as p,d as a,n as F,s as z,C as B,A as S,t as I,x as H,r as h,o as O,w as C,h as J,l as G,j as K,i as P,H as Q,J as W,E as X}from"./index-a0301d80.js";const Y={class:"overflow-auto"},Z={class:"flex flex-row md:flex-column gap-1 md:gap-2 list-none m-0 p-0 overflow-auto"},ee=["onClick"],te={key:0,class:"ml-auto text-sm font-semibold bg-primary-50 text-primary-900 px-2 py-1 hidden md:inline text-center",style:{"border-radius":"2rem",width:"23px",height:"23px"}},le={__name:"MailSidebar",props:{items:{type:Array,default:()=>[]}},setup(k){const m=q(),l=o=>{const v=o.routerLink||"/apps/mail/compose";m.push(v)};return(o,v)=>{const r=y("Button");return g(),x("div",null,[p(r,{onClick:l,label:"Compose New",class:"mb-5 w-full",outlined:""}),a("div",Y,[a("ul",Z,[(g(!0),x(F,null,z(k.items,s=>(g(),x("li",{key:s.id,class:B(["cursor-pointer select-none p-3 transition-duration-150 border-round flex align-items-center justify-content-center md:justify-content-start md:flex-1 flex-auto",{"bg-primary":S(m).currentRoute.value.path===s.routerLink,"hover:surface-hover":S(m).currentRoute.value.path!==s.routerLink}]),onClick:b=>l(s)},[a("i",{class:B(["md:mr-3 text-600 transition-duration-150 text-lg",[s.icon,{"text-primary-50":S(m).currentRoute.value.path===s.routerLink}]])},null,2),a("span",{class:B(["text-900 font-medium hidden md:inline",{"text-primary-50":S(m).currentRoute.value.path===s.routerLink}])},I(s.label),3),s.badge?(g(),x("span",te,I(s.badge),1)):H("",!0)],10,ee))),128))])])])}}},ae={class:"p-0 m-0"},se={class:"surface-section grid grid-nogutter formgrid flex-column md:flex-row gap-6 p-5 border-round"},oe={class:"col"},ne=a("label",{for:"to",class:"block text-900 font-semibold mb-3"},"To",-1),ie={class:"p-input-icon-left w-full",style:{height:"3.5rem"}},re=a("i",{class:"pi pi-user",style:{left:"1.5rem"}},null,-1),ue={class:"col"},de=a("label",{for:"Subject",class:"block text-900 font-semibold mb-3"},"Subject",-1),ce={class:"p-input-icon-left w-full",style:{height:"3.5rem"}},pe=a("i",{class:"pi pi-pencil",style:{left:"1.5rem"}},null,-1),me={key:0,class:"col-12 field"},ve={class:"border-1 surface-border border-round p-4"},fe={class:"col-12 field"},he=a("i",{class:"pi pi-ellipsis-h"},null,-1),be=[he],ge={class:"flex column-gap-3 justify-content-end p-5 border-top-1 surface-border"},_e={__name:"Reply",props:{dialogVisible:{type:Boolean,default:!1},mailDetail:{type:Object,default:null}},emits:["save","update:dialogVisible"],setup(k,{emit:m}){const l=h({}),o=h({}),v=m,r=k,s=h(!1),b=h(!1);O(()=>{c()}),C(()=>r.mailDetail,()=>{c()});const c=()=>{l.value={...r.mailDetail}},$=()=>{const u=j();v("save",u)},j=()=>({...l.value,...o.value,id:L(),to:r.mailDetail.to||r.mailDetail.from,sent:!0,archived:!1,trash:!1,spam:!1,starred:!1,important:!1,date:R()}),M=()=>{s.value=!s.value},L=()=>{let u="",n="0123456789";for(let _=0;_<5;_++)u+=n.charAt(Math.floor(Math.random()*n.length));return u},R=()=>new Date().toDateString().split(" ").slice(1,4).join(" ");return C(()=>r.dialogVisible,u=>{b.value=u}),C(()=>b.value,u=>{v("update:dialogVisible",u)}),(u,n)=>{const _=y("InputText"),V=y("Editor"),w=y("Button"),D=y("Dialog"),A=J("tooltip");return g(),G(D,{visible:b.value,"onUpdate:visible":n[5]||(n[5]=d=>b.value=d),header:"New Message",modal:"",class:"mx-3 sm:mx-0 sm:w-full md:w-8 lg:w-6",contentClass:"border-round-bottom border-top-1 surface-border p-0"},{default:K(()=>[a("div",ae,[a("div",se,[a("div",oe,[ne,a("span",ie,[re,p(_,{disabled:"",id:"to",type:"text",class:"w-full pl-7 text-900 font-semibold",style:{height:"3.5rem"},modelValue:l.value.from,"onUpdate:modelValue":n[0]||(n[0]=d=>l.value.from=d)},null,8,["modelValue"])])]),a("div",ue,[de,a("span",ce,[pe,p(_,{disabled:"",id:"subject",type:"text",placeholder:"Subject",class:"w-full pl-7 text-900 font-semibold",style:{height:"3.5rem"},modelValue:l.value.title,"onUpdate:modelValue":n[1]||(n[1]=d=>l.value.title=d)},null,8,["modelValue"])])]),s.value?(g(),x("div",me,[a("div",ve,I(l.value.message),1)])):H("",!0),a("div",fe,[P((g(),x("span",{class:"surface-ground cursor-pointer border-round px-2",onClick:n[2]||(n[2]=d=>M())},be)),[[A,s.value?"Hide content":"Show content"]]),p(V,{editorStyle:{height:"250px"},class:"mt-3",modelValue:o.value.message,"onUpdate:modelValue":n[3]||(n[3]=d=>o.value.message=d)},null,8,["modelValue"])])]),a("div",ge,[p(w,{type:"button",outlined:"",icon:"pi pi-image"}),p(w,{type:"button",outlined:"",icon:"pi pi-paperclip"}),p(w,{type:"button",class:"h-3rem",icon:"pi pi-send",label:"Send",onClick:n[4]||(n[4]=d=>$())})])])]),_:1},8,["visible"])}}},xe={class:"card"},ye={class:"flex flex-column md:flex-row gap-4"},we={class:"w-full md:w-3 xl:w-2 xl:p-3"},ke={class:"md:w-9 xl:w-10 xl:p-3"},Ve={__name:"Index",setup(k){const m=Q(),l=h([]),o=h({}),v=h("inbox"),r=h(!1),s=h(null),b=W();O(async()=>{v.value=b.path.split("/")[3],l.value=await $(),c(l.value)}),C(()=>b.path,e=>{v.value=e.split("/")[3]});const c=async e=>{j(e)},$=async()=>{const e=await fetch("/demo/data/mail.json"),{data:t}=await e.json();return t},j=e=>{for(const t of e)!t.archived&&!t.trash&&!t.spam&&!t.sent&&M("inbox",t),Object.keys(t).forEach(i=>{t[i]===!0&&M(i,t)})},M=(e,t)=>{o.value[e]?o.value[e].push(t):o.value[e]=[]},L=X(()=>{var t,i,f,E,N,T,U;const e=o.value;return[{label:"Inbox",icon:"pi pi-inbox",badge:((t=e.inbox)==null?void 0:t.length)||0,routerLink:"/apps/mail/inbox"},{label:"Starred",icon:"pi pi-star",badge:((i=e.starred)==null?void 0:i.length)||0,routerLink:"/apps/mail/starred"},{label:"Spam",icon:"pi pi-ban",badge:((f=e.spam)==null?void 0:f.length)||0,routerLink:"/apps/mail/spam"},{label:"Important",icon:"pi pi-bookmark",badge:((E=e.important)==null?void 0:E.length)||0,routerLink:"/apps/mail/important"},{label:"Sent",icon:"pi pi-send",badge:((N=e.sent)==null?void 0:N.length)||0,routerLink:"/apps/mail/sent"},{label:"Archived",icon:"pi pi-book",badge:((T=e.archived)==null?void 0:T.length)||0,routerLink:"/apps/mail/archived"},{label:"Trash",icon:"pi pi-trash",badge:((U=e.trash)==null?void 0:U.length)||0,routerLink:"/apps/mail/trash"}]}),R=async e=>{o.value={};const t=e.length>0?"Mails deleted":"Mail deleted";V("trash",e),m.add({severity:"info",summary:"Info",detail:t,life:3e3}),c(l.value)},u=async e=>{o.value={},e.forEach(t=>{l.value.find(i=>i.id===t.id).spam=!0}),c(l.value)},n=async e=>{o.value={},V("archived",e),c(l.value)},_=async(e,t,i)=>{o.value={},l.value.find(f=>f.id===t.id)[e]=i,c(l.value)},V=(e,t)=>{t.length>0?t.forEach(i=>{l.value.find(f=>f.id===i.id)[e]=!0}):l.value.find(i=>i.id===t.id)[e]=!0},w=e=>{r.value=!0,s.value=e},D=e=>{r.value=!1,s.value=null,o.value={},l.value.push(e),c(l.value)},A=e=>{o.value={},l.value.push(e),c(l.value)},d=e=>{r.value=e};return(e,t)=>{const i=y("router-view");return g(),x(F,null,[a("div",xe,[a("div",ye,[a("div",we,[p(le,{items:L.value},null,8,["items"])]),a("div",ke,[p(i,{allMails:l.value,mails:o.value[v.value]||void 0,onTrash:R,onSpam:u,onArchive:n,"onChange:mail:type":_,onReply:w,"onSend:message":D,"onNew:mail":A},null,8,["allMails","mails"])])])]),p(_e,{visible:r.value,"onUpdate:visible":t[0]||(t[0]=f=>r.value=f),"mail-detail":s.value,onSave:D,"onUpdate:dialogVisible":t[1]||(t[1]=f=>d())},null,8,["visible","mail-detail"])],64)}}};export{Ve as default};
